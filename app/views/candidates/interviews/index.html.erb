<% content_for :title, 'Tous les entretiens' %>

<form action="<%= candidates_interviews_path %>" class="mt-3 mb-3">
  <input  class="form-control"
          type="text"
          placeholder="Recherche"
          name="search"
          value="<%= params[:search] %>">
</form>

<p><%= page_entries_info @candidates %></p>
<table class="table table-hover mt-5">
<thead>
  <tr>
    <th width="80">#</th>
    <th width="80">Numéro</th>
    <th>Prénom</th>
    <th>Nom</th>
    <th width="400">Baccalauréat</th>
    <th>Entretien</th>
    <th>Jury</th>
    <th></th>
    <th></th>
  </tr>
</thead>
<tbody>
  <% @candidates.each_with_index do |candidate, index| %>
    <tr>
      <td>
        <span class="badge badge-info"><%= index + 1 %></span>
        <%= candidate.interview_position %>
      </td>
      <td><%= link_to candidate.number, candidates_interview_path(candidate) %></td>
      <td><%= candidate.first_name %></td>
      <td><%= candidate.last_name %></td>
      <td class="small"><%= candidate.baccalaureat %></td>
      <td><%= candidate.interview_note.to_f.round %></td>
      <td class="small"><%= candidate.interviewers.join(', ') %></td>
      <td><%= link_to 'Imprimer le PV',
                      candidates_print_interview_path(candidate),
                      class: 'btn btn-primary btn-sm' %></td>
      <td class="small
                <%= 'bg-danger' if candidate.decile_bad_surprise? %>
                <%= 'bg-success' if candidate.decile_good_surprise? %>
                ">
        <span class="badge badge-light">D<%= candidate.selected_for_interview_decile %> dossier sélectionné</span><br/>
        <% if candidate.interview_decile %>
          <span class="badge badge-light">D<%= candidate.interview_decile %> entretien</span>
        <% end %>
      </td>
    </tr>
  <% end %>
</tbody>
</table>
<%= paginate @candidates, theme: 'twitter-bootstrap-4' %>
