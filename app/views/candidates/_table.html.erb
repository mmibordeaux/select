<%
param_name ||= :page
quota ||= nil
%>
<p><%= page_entries_info candidates %></p>
<table class="table table-hover mt-5">
  <thead>
    <tr>
      <th width="30">#</th>
      <th width="80">Numéro</th>
      <th>Prénom</th>
      <th>Nom</th>
      <th width="400">Baccalaureat</th>
      <th width="80">Boursier</th>
      <th>Evaluation</th>
      <th>Evaluateur</th>
      <th width="30">(#)</th>
    </tr>
  </thead>

  <tbody>
    <% candidates.each_with_index do |candidate, index| %>
      <%
      number_in_list = 1 + index + ((candidates.current_page-1) * candidates.current_per_page)
      in_quota = quota.nil? || number_in_list <= quota
      %>
      <tr class="<%= 'out-of-quota' unless in_quota %>">
        <td><%= candidate.position %></td>
        <td><%= link_to candidate.number, candidate %></td>
        <td><%= candidate.first_name %></td>
        <td><%= candidate.last_name %></td>
        <td class="small"><%= link_to candidate.baccalaureat, candidate.baccalaureat %></td>
        <td><%= candidate.scholarship ? 'Oui' : 'Non' %></td>
        <td><%= candidate.evaluation_note.round(2) %></td>
        <td class="small">
          <% if candidate.evaluated_by %>
            <%= link_to candidate.evaluated_by, candidate.evaluated_by %>
          <% elsif candidate.attributed_to %>
            <%= link_to candidate.attributed_to, candidate.attributed_to %>
          <% else %>
            Pas d'évaluateur
          <% end %>
        </td>
        <td>
          <%= number_in_list %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate candidates, theme: 'twitter-bootstrap-4', param_name: param_name %>